{"ast":null,"code":"import mongoose from \"mongoose\";\nconst connection = {\n  isConnected: false || 0\n};\n\nconst database = async (req, res, next) => {\n  // if (connection.isConnected) {\n  //     console.log();\n  //     return next();\n  // }\n  if (mongoose.connections[0].readyState) return next();\n  await mongoose.connect(process.env.MONGO_URI, {\n    useNewUrlParser: true,\n    useUnifiedTopology: true,\n    useFindAndModify: false\n  }); // connection.isConnected = db.connections[0].readyState;\n  // console.log(connection.isConnected, '-------isConnected----',);\n  // req.db = process.env.DB_NAME;\n  // req.dbClient = db;\n\n  return next();\n};\n\nexport default database;","map":{"version":3,"sources":["D:/React/next-struc/middlewares/database.js"],"names":["mongoose","connection","isConnected","database","req","res","next","connections","readyState","connect","process","env","MONGO_URI","useNewUrlParser","useUnifiedTopology","useFindAndModify"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,UAArB;AACA,MAAMC,UAAU,GAAG;AACfC,EAAAA,WAAW,EAAE,SAAS;AADP,CAAnB;;AAGA,MAAMC,QAAQ,GAAG,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;AACvC;AACA;AACA;AACA;AACA,MAAIN,QAAQ,CAACO,WAAT,CAAqB,CAArB,EAAwBC,UAA5B,EAAwC,OAAOF,IAAI,EAAX;AACxC,QAAMN,QAAQ,CAACS,OAAT,CAAiBC,OAAO,CAACC,GAAR,CAAYC,SAA7B,EAAwC;AAC1CC,IAAAA,eAAe,EAAE,IADyB;AAE1CC,IAAAA,kBAAkB,EAAE,IAFsB;AAG1CC,IAAAA,gBAAgB,EAAE;AAHwB,GAAxC,CAAN,CANuC,CAWvC;AACA;AACA;AACA;;AACA,SAAOT,IAAI,EAAX;AACH,CAhBD;;AAiBA,eAAeH,QAAf","sourcesContent":["import mongoose from \"mongoose\";\nconst connection = {\n    isConnected: false || 0\n}\nconst database = async (req, res, next) => {\n    // if (connection.isConnected) {\n    //     console.log();\n    //     return next();\n    // }\n    if (mongoose.connections[0].readyState) return next();\n    await mongoose.connect(process.env.MONGO_URI, {\n        useNewUrlParser: true,\n        useUnifiedTopology: true,\n        useFindAndModify: false\n    });\n    // connection.isConnected = db.connections[0].readyState;\n    // console.log(connection.isConnected, '-------isConnected----',);\n    // req.db = process.env.DB_NAME;\n    // req.dbClient = db;\n    return next();\n}\nexport default database;"]},"metadata":{},"sourceType":"module"}