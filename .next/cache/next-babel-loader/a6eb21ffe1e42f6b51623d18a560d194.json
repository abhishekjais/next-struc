{"ast":null,"code":"import { MongoClient } from 'mongodb';\nconst client = new MongoClient(process.env.MONGODB_URI, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\nexport default async function database(req, res, next) {\n  console.log('reaaaaaaaa', client.isConnected(), process.env.MONGODB_URI);\n  if (!client.isConnected()) await client.connect();\n  req.dbClient = client;\n  req.db = client.db(process.env.DB_NAME); // console.log(client, 'client');\n\n  await setUpDb(req.db);\n  return next();\n}","map":{"version":3,"sources":["/var/local/react/next-struc/middlewares/database.js"],"names":["MongoClient","client","process","env","MONGODB_URI","useNewUrlParser","useUnifiedTopology","database","req","res","next","console","log","isConnected","connect","dbClient","db","DB_NAME","setUpDb"],"mappings":"AAAA,SAASA,WAAT,QAA4B,SAA5B;AAEA,MAAMC,MAAM,GAAG,IAAID,WAAJ,CAAgBE,OAAO,CAACC,GAAR,CAAYC,WAA5B,EAAyC;AACpDC,EAAAA,eAAe,EAAE,IADmC;AAEpDC,EAAAA,kBAAkB,EAAE;AAFgC,CAAzC,CAAf;AAKA,eAAe,eAAeC,QAAf,CAAwBC,GAAxB,EAA6BC,GAA7B,EAAkCC,IAAlC,EAAwC;AACnDC,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BX,MAAM,CAACY,WAAP,EAA1B,EAAgDX,OAAO,CAACC,GAAR,CAAYC,WAA5D;AACA,MAAI,CAACH,MAAM,CAACY,WAAP,EAAL,EAA2B,MAAMZ,MAAM,CAACa,OAAP,EAAN;AAC3BN,EAAAA,GAAG,CAACO,QAAJ,GAAed,MAAf;AACAO,EAAAA,GAAG,CAACQ,EAAJ,GAASf,MAAM,CAACe,EAAP,CAAUd,OAAO,CAACC,GAAR,CAAYc,OAAtB,CAAT,CAJmD,CAKnD;;AACA,QAAMC,OAAO,CAACV,GAAG,CAACQ,EAAL,CAAb;AACA,SAAON,IAAI,EAAX;AACH","sourcesContent":["import { MongoClient } from 'mongodb';\n\nconst client = new MongoClient(process.env.MONGODB_URI, {\n    useNewUrlParser: true,\n    useUnifiedTopology: true,\n});\n\nexport default async function database(req, res, next) {\n    console.log('reaaaaaaaa', client.isConnected(), process.env.MONGODB_URI);\n    if (!client.isConnected()) await client.connect();\n    req.dbClient = client;\n    req.db = client.db(process.env.DB_NAME);\n    // console.log(client, 'client');\n    await setUpDb(req.db);\n    return next();\n}"]},"metadata":{},"sourceType":"module"}